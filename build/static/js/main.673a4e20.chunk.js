(this["webpackJsonpcanopy-task"]=this["webpackJsonpcanopy-task"]||[]).push([[0],{130:function(e,t,a){e.exports=a(254)},135:function(e,t,a){},140:function(e,t,a){},254:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),o=a.n(l),c=(a(135),a(38)),i=a(14),s=a(42),u=(a(140),a(258)),d=a(259),h=a(260),p=a(261),m=a(264),g=a(30),E=function(e){return r.a.createElement(u.a,null,r.a.createElement(d.a,{style:{textAlign:"center"}},r.a.createElement("h1",null,"Welcome"),r.a.createElement("p",null,"This is a simple react application to show the ",r.a.createElement("strong",null,"Networth Chart")," and ",r.a.createElement("strong",null,"Holdings Table")),r.a.createElement(h.a,null,r.a.createElement(p.a,null),r.a.createElement(p.a,null,r.a.createElement(c.b,{to:"/chart",style:{textDecoration:"none"}},r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement(m.a.Title,{style:{color:"black"}}," ",r.a.createElement("strong",null," Networth Chart ")),r.a.createElement(g.a,{color:"rgba(26, 188, 156, 0.8)",size:50}))))),r.a.createElement(p.a,null,r.a.createElement(c.b,{to:"/table",style:{textDecoration:"none"}},r.a.createElement(m.a,null,r.a.createElement(m.a.Body,null,r.a.createElement(m.a.Title,{style:{color:"black"}}," ",r.a.createElement("strong",null,"Holdings Table")," "),r.a.createElement(g.f,{color:"rgba(26, 188, 156, 0.8)",size:50}))))),r.a.createElement(p.a,null))))},f=a(20),b=a(21),v=a(23),y=a(22),_=a(118),O=a.n(_),k=a(52),C=a.n(k),j=function(e){return console.log(e),{type:"RECEIVE_NETWORTH",networth:{isLoading:!1,data:e}}},L=function(){return function(e,t){return t().networth.data.length?Promise.resolve():e((t(),function(e){e({type:"REQUEST_NETWORTH",networth:{isLoading:!0}}),fetch("https://canopy-frontend-task.now.sh/api/networth",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=[];return e.map((function(e){var a=C()().format("YYYY-MM-DD"),n=C()().subtract(1,"y").format("YYYY-MM-DD"),r=e.traded_on.split("-"),l=[];l.push(r[2],r[1],r[0]);var o=l.join("-");C()(o).isBetween(n,a)&&t.push({date:C()(o).format("DD-MM-YYYY"),value:e.net_worth})})),t})).then((function(t){return e(j(t))}))}))}},w=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(L())}},{key:"render",value:function(){var e=this.props.dataProvider;if(this.props.isLoading)return r.a.createElement("p",null,"Loading\u2026");if(this.props.hasOwnProperty("dataProvider")&&void 0!==e)var t={type:"serial",theme:"light",marginRight:40,marginLeft:40,autoMarginOffset:20,mouseWheelZoomEnabled:!0,valueAxes:[{id:"v1",axisAlpha:0,position:"left",ignoreAxisWidth:!0}],balloon:{borderThickness:1,shadowAlpha:0},graphs:[{id:"g1",balloon:{drop:!0,adjustBorderColor:!1,color:"#ffffff"},bullet:"round",bulletBorderAlpha:1,bulletColor:"#FFFFFF",bulletSize:5,hideBulletsCount:50,lineThickness:2,title:"red line",useLineColorForBulletBorder:!0,valueField:"value",balloonText:"<span style='font-size:18px;'>[[value]]</span>"}],chartScrollbar:{graph:"g1",oppositeAxis:!1,offset:30,scrollbarHeight:80,backgroundAlpha:0,selectedBackgroundAlpha:.1,selectedBackgroundColor:"#888888",graphFillAlpha:0,graphLineAlpha:.5,selectedGraphFillAlpha:0,selectedGraphLineAlpha:1,autoGridCount:!0,color:"#AAAAAA"},chartCursor:{pan:!0,valueLineEnabled:!0,valueLineBalloonEnabled:!0,cursorAlpha:1,cursorColor:"#258cbb",limitToGraph:"g1",valueLineAlpha:.2,valueZoomable:!0},valueScrollbar:{oppositeAxis:!1,offset:50,scrollbarHeight:10},categoryField:"date",dataProvider:this.props.dataProvider},a=r.a.createElement(O.a.React,{style:{width:"100%",height:"500px"},options:t});return r.a.createElement(u.a,{fluid:!0},r.a.createElement("h3",{style:{display:"flex",marginTop:"1%",marginLeft:"1%"}},"Networth Chart"),a)}}]),a}(n.Component),T=Object(s.b)((function(e){return{isLoading:e.networth.isLoading,dataProvider:e.networth.data}}))(w),S=(a(147),a(123)),A=function(e){return{type:"SELECT_ITEM",selectedItem:e}},I=function(e){return{type:"RECEIVE_HOLDING",holding:{isLoading:!1,data:e.payload}}},R=function(){return function(e,t){return t().holding.data.length?Promise.resolve():e((t(),function(e){e({type:"REQUEST_HOLDING",holding:{isLoading:!0}}),fetch("https://canopy-frontend-task.now.sh/api/holdings",{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e(I(t))})).then((function(t){return e({type:"CREATE_HOLDING",payload:t.holding.data})}))}))}},x=a(265),D=a(72),N=a(65),H=a(74),B=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,null,[{key:"reducer",value:function(e,t,a){switch(e.type){case"CREATE_HOLDING":for(var n=0;n<e.payload.length;n++)t.create({name:e.payload[n].name,ticker:e.payload[n].ticker,asset_class:e.payload[n].asset_class,avg_price:e.payload[n].avg_price,market_price:e.payload[n].market_price,latest_chg_pct:e.payload[n].latest_chg_pct,market_value_ccy:e.payload[n].market_value_ccy,isCollapsed:!1,isSelected:!1});break;case"REQUEST_ALL":console.log(t.all())}}},{key:"fields",get:function(){return{name:Object(D.a)(),ticker:Object(D.a)(),asset_class:Object(D.a)(),avg_price:Object(D.a)(),market_price:Object(D.a)(),latest_chg_pct:Object(D.a)(),market_value_ccy:Object(D.a)(),isCollapsed:Object(D.a)()}}}]),a}(N.a);B.modelName="Holding";var M=new H.a({stateSelector:function(e){return e.orm}});M.register(B);var F=Object(x.b)([M,function(e){return e.holding.orderStatus},function(e){return e.holding.selectedItem}],(function(e,t,a){if(void 0===a)return e.Holding.orderBy(["asset_class"],[t]).toRefArray();var n=e.Holding.orderBy(["asset_class"],[t]).toRefArray();return n.map((function(e){e.id===a.id&&(e.isSelected=a.isSelected),e.asset_class===a.asset_class&&e.id!==a.id&&(e.isCollapsed=!e.isCollapsed)})),n})),Y=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props;return r.a.createElement("th",{onClick:function(){e.onChange()}},"Asset Class","asc"===e.status?r.a.createElement(g.c,null):r.a.createElement(g.b,null))}}]),a}(n.Component),G=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props;return this.props.holdings.map((function(t,a){return r.a.createElement("tr",{key:a,onClick:function(){return function(t){e.onChange(t)}(t)},style:{display:!1===t.isCollapsed?"table-row":"none"}},r.a.createElement("td",null,t.isSelected?r.a.createElement(g.e,null):r.a.createElement(g.d,null)),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.ticker),r.a.createElement("td",null,t.asset_class),r.a.createElement("td",null,void 0!==t.avg_price&&null!==t.avg_price?t.avg_price.toFixed(2):"-"),r.a.createElement("td",null,void 0!==t.market_price&&null!==t.market_price?t.market_price.toFixed(2):"-"),r.a.createElement("td",null,t.latest_chg_pct),r.a.createElement("td",null,t.market_value_ccy.toFixed(2)))}))}}]),a}(n.Component),P=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleSort=function(t){(0,e.props.dispatch)({type:"SELECT_ORDER"})},e.onSelected=function(t,a){(0,e.props.dispatch)(A(t))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(R())}},{key:"render",value:function(){var e=this.props.holdingsRef;if(this.props.isLoading)return r.a.createElement("p",null,"Loading\u2026");if(this.props.hasOwnProperty("holdingsRef")&&void 0!==e)var t=r.a.createElement(G,{onChange:this.onSelected,holdings:e});return r.a.createElement(u.a,{fluid:!0},r.a.createElement("h3",{style:{display:"flex",marginTop:"1%",marginLeft:"1%"}},"Holdings Table"),r.a.createElement(S.a,{responsive:"md",striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Ticker"),r.a.createElement(Y,{onChange:this.handleSort,status:this.props.status}),r.a.createElement("th",null,"Avg Price"),r.a.createElement("th",null,"Market Price"),r.a.createElement("th",null,"Latest Change %"),r.a.createElement("th",null,"Market Value in CCY"))),r.a.createElement("tbody",null,t)))}}]),a}(n.Component),W=Object(s.b)((function(e){return{isLoading:e.holding.isLoading,status:e.holding.orderStatus,holdingsRef:F(e)}}))(P),U=a(34),V=a(124),Q=a.n(V),z=a(125),J={isLoading:!1,data:[],orderStatus:"asc",isSorted:!1,selectedItem:{}};var X={isLoading:!1,data:[]};var Z=Object(U.c)({holding:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_HOLDING":return Object.assign({},e,{isLoading:t.holding.isLoading});case"RECEIVE_HOLDING":return Object.assign({},e,{isLoading:t.holding.isLoading,data:t.holding.data});case"SELECT_ORDER":return Object.assign({},e,{orderStatus:"asc"===e.orderStatus?"desc":"asc",selectedItem:{}});case"SELECT_ITEM":return Object.assign({},e,{selectedItem:{isCollapsed:!t.selectedItem.isCollapsed,isSelected:!t.selectedItem.isCollapsed&&!t.selectedItem.isSelected,name:t.selectedItem.name,id:t.selectedItem.id,asset_class:t.selectedItem.asset_class,ticker:t.selectedItem.ticker,avg_price:t.selectedItem.avg_price,market_price:t.selectedItem.market_price,market_value_ccy:t.selectedItem.market_value_ccy}});default:return e}},networth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_NETWORTH":return Object.assign({},e,{isLoading:t.networth.isLoading});case"RECEIVE_NETWORTH":return console.log(t.networth,"networth from reducer"),Object.assign({},e,{isLoading:t.networth.isLoading,data:t.networth.data});default:return e}},orm:Object(x.a)(M)}),$=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||U.d)(Object(U.a)(z.a,Q.a))(U.e)(Z),q=a(262),K=a(263),ee=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).handleToggle=function(){return n.setState({open:!n.state.open})},n.handleClose=function(){return n.setState({open:!1})},n.state={open:!1},n}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q.a,{variant:"dark",style:{justifyContent:"center",backgroundColor:"rgb(26,188,156,0.8)"}},r.a.createElement(K.a,{className:"justify-content-end",style:{float:"left"}},this.props.items.map((function(e,t){return r.a.createElement(c.b,{key:t,to:e.path,style:{textDecoration:"none"}},r.a.createElement(K.a.Item,{className:"nav-link",as:"li",style:{color:"white",fontWeight:"bold"}},e.name))})))))}}]),a}(n.Component),te=[{name:"Canopy",path:"/"},{name:"Networth Chart",path:"/chart"},{name:"Holdings Table",path:"/table"}],ae=function(){return r.a.createElement(s.a,{store:$},r.a.createElement(c.a,null,r.a.createElement(ee,{items:te}),r.a.createElement(i.a,{exact:!0,path:"/",component:E}),r.a.createElement(i.a,{exact:!0,path:"/table",component:W}),r.a.createElement(i.a,{exact:!0,path:"/Chart",component:T})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.673a4e20.chunk.js.map